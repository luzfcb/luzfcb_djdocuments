{% extends "luzfcb_djdocuments/bootstrap3/base.html" %}
{% load staticfiles %}
{% load spurl %}
{% load luzfcb_djdocuments_tags %}

{% block extra_head_css %}
    <link href="{% static 'luzfcb_djdocuments/css/luzfcb_page_style.css' %}"
          rel="stylesheet">
    <link href="{% static 'luzfcb_djdocuments/css/luzfcb_document_format_styles_print.css' %}"
          rel="stylesheet">
{% endblock %}

{% block title %}{{ object.titulo|remover_tags_html|slugify|slice:":200" }}_
    {{ object.identificador_versao }}{% endblock title %}

{% block project_name %}SOLAR{% endblock project_name %}

{#{% block navbar_botoes %}#}
{#    <li class="active">#}
{#        <p class="navbar-btn">#}
{#            {% url "documentos:validar-detail pk=object.pk" as current_url %}#}
{#            <a href="{% spurl base=current_url query="as=pdf" %}" class="btn btn-default djpopup nolock hidden-print">Home</a>#}
{#        </p>#}
{#    </li>#}
{#    <li>#}
{#        <a href="#about">About</a>#}
{#    </li>#}
{#{% endblock %}#}



{% block conteudo_app %}

    <div class="row center-block conteudo" id="conteudo">
        <div class="a4-pagina">

            {% block cabecalho %}
                <div class="cabecalho">
                    <div align="center">
                        {{ object.cabecalho|safe }}
                    </div>
                    {{ object.titulo|safe }}
                    <hr style="border:none; padding:0; margin:5px 2px 0 2px; border-top:medium double #333">
                </div>
            {% endblock cabecalho %}


            {% block corpo %}
                {% if object %}
                    <div class="documento-conteudo">
                        {{ object.conteudo|safe }}
                    </div>
                {% else %}
                    Nada para mostrar
                {% endif %}
            {% endblock corpo %}


            {% block rodape %}
                <div class="rodape">
                    {% url 'documentos:validar' as validar_url_view %}
                    {% spurl base=validar_url_view query="h={{ object.assinatura_hash_upper_limpo }}" as validar_url %}
                    <hr>
                    <table>
                        <tbody>
                        <tr>
                            <td>

                            </td>
                            <td>
                                <p style="margin:0;text-align: left; font-size:11pt;font-family: Times New Roman;">
                                    {% if object.esta_assinado %}
                                        Documento assinado eletronicamente por
                                        <b>{{ object.assinado_por.get_full_name }}</b>,
                                        em {{ object.assinado_em|date:"d/m/Y H:m:s" }}, conforme art. 1º, III,
                                        "b", da Lei 11.419/2006.</p>
                                    {% endif %}
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <hr>
                    <table>
                        <tbody>
                        <tr>
                            <td style="width: 200px; height: 105px">
                                {% if object.esta_assinado %}
                                    <a id="url_validacao" class="hidden-print-href"
                                       href="{{ validar_url|absolute_uri:request }}">
                                        <div id="codigo_qr" style="alignment: center; display: block;">
                                            {{ qr_code_validation_html_img_tag|safe }}
                                        </div>
                                        <p class="hidden-print">Verifique a Validade</p>
                                    </a>
                                {% endif %}
                            </td>
                            <td>
                                <p style="margin:4;text-align: left; font-size:11pt;font-family: Times New Roman;">
                                    {% if object.esta_assinado %}


                                        A autenticidade do documento pode ser conferida no site
                                        {{ validar_url_view|absolute_uri:request|urlize }} informando o código
                                        verificador:
                                        <span><br/><b>{{ object.assinatura_hash_upper_limpo|dividir_a_cada:10 }}</b></span>
                                    {% endif %}
                                </p>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <hr style="border:none; padding:0; margin:5px 2px 0 2px; border-top:medium double #333">
                    <table border="0" cellpadding="2" cellspacing="0" style="width:100%">
                        <tbody>
                        <tr>
                            <td>
                                {{ object.identificador_versao }}
                            </td>
                            <td style="text-align:right">
                                {% block numero_pagina %}
                                {% endblock numero_pagina %}
                        </tr>
                        </tbody>
                    </table>
                </div>
            {% endblock rodape %}
        </div>
    </div>
{% endblock conteudo_app %}

